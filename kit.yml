name:    rabbitmq
version: 0.0.1
author:  Thomas Mitchell <tmitchell@starkandwayne.com>
docs:    https://github.com/pivotal-cf/cf-rabbitmq-multitenant-broker-release 
code:    https://github.com/genesis-community/rabbitmq-genesis-kit

genesis_version_min: 2.7.9

credentials:
  base:
    rabbitmq/admin/broker:
      password: random 64
    rabbitmq/admin/management:
      password: random 64
    rabbitmq/erlang-cookie:
      cookie: random 64

  broker:
    broker/auth:
      password: random 64

certificates:
  +rmq-tls:
    rabbitmq/certs:
      ca:
        valid_for: 10y
        names:     ["rabbitmqCA"]
      server:
        valid_for: 1y
        names:     ["${params.rmq_domain}"]
    
  +broker-tls:
    broker/certs:
      ca:
        valid_for: 10y
        names:     ["rmqbrokerCA"]
      server:
        valid_for: 1y
        names:     ["${params.broker_domain}"]
